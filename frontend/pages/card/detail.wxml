<!-- å¡ç‰‡è¯¦æƒ…é¡µé¢ -->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="navbar">
    <button class="back-btn" bindtap="onBack">
      <text class="back-icon">â†</text>
    </button>
    <text class="title">å¡ç‰‡è¯¦æƒ…</text>
    <view class="placeholder"></view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- å¡ç‰‡å†…å®¹ -->
  <view class="card-content" wx:if="{{!loading && card}}">
    <!-- å¡ç‰‡ä¸»ä½“ -->
    <view class="card-main">
      <view class="card-container">
        <text class="card-text">{{card.content}}</text>
        <text class="card-author" wx:if="{{card.author}}">â€”â€” {{card.author}}</text>
      </view>
    </view>

    <!-- å¡ç‰‡ä¿¡æ¯ -->
    <view class="card-info">
      <view class="info-item">
        <text class="info-label">ç±»å‹</text>
        <text class="info-value">{{card.typeText || 'åŠ±å¿—'}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">æ—¥æœŸ</text>
        <text class="info-value">{{card.date || '2025-09-07'}}</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="action-btn {{isFavorited ? 'favorited' : ''}}" bindtap="onToggleFavorite">
        <text class="btn-icon">{{isFavorited ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        <text class="btn-text">{{isFavorited ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
      </button>
      
      <button class="action-btn {{isLiked ? 'liked' : ''}}" bindtap="onToggleLike">
        <text class="btn-icon">{{isLiked ? 'ğŸ‘' : 'ğŸ‘ğŸ»'}}</text>
        <text class="btn-text">{{isLiked ? 'å·²ç‚¹èµ' : 'ç‚¹èµ'}}</text>
        <text class="btn-count" wx:if="{{likes > 0}}">{{likes}}</text>
      </button>
    </view>

    <!-- å…¶ä»–æ“ä½œ -->
    <view class="more-actions">
      <button class="more-btn" bindtap="onCopyContent">
        <text class="more-icon">ğŸ“‹</text>
        <text class="more-text">å¤åˆ¶å†…å®¹</text>
      </button>
      
      <button class="more-btn" bindtap="onShare">
        <text class="more-icon">ğŸ“¤</text>
        <text class="more-text">åˆ†äº«</text>
      </button>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && !card}}">
    <view class="empty-icon">ğŸ“­</view>
    <text class="empty-title">å¡ç‰‡ä¸å­˜åœ¨</text>
    <text class="empty-desc">å¯èƒ½å·²è¢«åˆ é™¤æˆ–ç§»åŠ¨</text>
    <button class="empty-btn" bindtap="onBack">
      <text>è¿”å›é¦–é¡µ</text>
    </button>
  </view>

  <!-- åˆ†äº«é¢æ¿ -->
  <include src="share.wxml"/>
</view>