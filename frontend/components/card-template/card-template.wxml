<!--components/card-template/card-template.wxml-->
<view class="card-container {{animationClass}}" 
      style="background: {{backgroundStyle.background}}; color: {{backgroundStyle.color}}; font-family: {{backgroundStyle.fontFamily}}"
      bindtap="onCardTap">
  
  <!-- åŠ è½½éª¨æ¶å± -->
  <view wx:if="{{isLoading}}" class="skeleton-container">
    <view class="skeleton-header"></view>
    <view class="skeleton-content">
      <view class="skeleton-line"></view>
      <view class="skeleton-line short"></view>
      <view class="skeleton-line"></view>
    </view>
    <view class="skeleton-footer"></view>
  </view>

  <!-- å¡ç‰‡å†…å®¹ -->
  <view wx:else class="card-content {{templateType}}">
    <!-- è£…é¥°å…ƒç´  -->
    <view class="decoration {{templateType}}" wx:if="{{templateType !== 'minimal'}}">
      <view class="decoration-dot"></view>
      <view class="decoration-line"></view>
    </view>

    <!-- å¡ç‰‡ç±»å‹æ ‡ç­¾ -->
    <view class="card-type-badge {{templateType}}">
      <text class="type-text">{{cardData.type === 'inspirational' ? 'åŠ±å¿—' : cardData.type === 'poetry' ? 'è¯—æ­Œ' : 'å“²ç†'}}</text>
    </view>

    <!-- å¡ç‰‡å†…å®¹ -->
    <view class="card-main">
      <view class="content-text {{templateType}}" selectable>
        {{cardData.content}}
      </view>
      
      <!-- åˆ†éš”çº¿ -->
      <view class="divider {{templateType}}"></view>
      
      <!-- å¡ç‰‡ä¿¡æ¯ -->
      <view class="card-info">
        <text class="date-text">{{cardData.generate_date}}</text>
        <text class="like-count" wx:if="{{cardData.like_count}}">â¤ï¸ {{cardData.like_count}}</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons {{templateType}}">
      <button class="action-btn favorite {{templateType}} {{cardData.isFavorited ? 'favorited' : ''}}" 
              bindtap="onFavoriteTap"
              hover-class="btn-hover">
        <text class="btn-icon">{{cardData.isFavorited ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        <text class="btn-text">{{cardData.isFavorited ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
      </button>
      
      <button class="action-btn share {{templateType}}" 
              bindtap="onShareTap"
              hover-class="btn-hover">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">åˆ†äº«</text>
      </button>
    </view>

    <!-- æ¨¡æ¿ç‰¹å®šè£…é¥° -->
    <view class="template-specific {{templateType}}">
      <!-- æç®€æ¨¡æ¿ -->
      <view wx:if="{{templateType === 'minimal'}}" class="minimal-decoration">
        <view class="corner top-left"></view>
        <view class="corner bottom-right"></view>
      </view>

      <!-- æ–‡è‰ºæ¨¡æ¿ -->
      <view wx:if="{{templateType === 'artistic'}}" class="artistic-decoration">
        <view class="watermark">âœ¨</view>
        <view class="gradient-overlay"></view>
      </view>

      <!-- æ´»åŠ›æ¨¡æ¿ -->
      <view wx:if="{{templateType === 'vibrant'}}" class="vibrant-decoration">
        <view class="bubble bubble-1"></view>
        <view class="bubble bubble-2"></view>
        <view class="bubble bubble-3"></view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½åŠ¨ç”» -->
  <view class="loading-overlay" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">æ­£åœ¨ç”Ÿæˆä»Šæ—¥çµæ„Ÿ...</text>
  </view>
</view>