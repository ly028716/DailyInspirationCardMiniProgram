# å¾®ä¿¡å°ç¨‹åºå‰ç«¯å¼€å‘æŒ‡å—

## ğŸ“± é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ app.js                 # åº”ç”¨é€»è¾‘
â”œâ”€â”€ app.json              # åº”ç”¨é…ç½®
â”œâ”€â”€ app.wxss             # å…¨å±€æ ·å¼
â”œâ”€â”€ project.config.json  # é¡¹ç›®é…ç½®
â”œâ”€â”€ assets/              # é™æ€èµ„æº
â”‚   â”œâ”€â”€ images/          # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ icons/           # å›¾æ ‡èµ„æº
â”‚   â””â”€â”€ fonts/           # å­—ä½“æ–‡ä»¶
â”œâ”€â”€ components/          # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ card/            # å¡ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ button/          # æŒ‰é’®ç»„ä»¶
â”‚   â””â”€â”€ loading/         # åŠ è½½ç»„ä»¶
â”œâ”€â”€ pages/               # é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ index/           # é¦–é¡µ
â”‚   â”œâ”€â”€ card/            # å¡ç‰‡è¯¦æƒ…
â”‚   â”œâ”€â”€ history/         # å†å²è®°å½•
â”‚   â”œâ”€â”€ profile/         # ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ settings/        # è®¾ç½®é¡µé¢
â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
    â”œâ”€â”€ api.js           # APIå°è£…
    â”œâ”€â”€ storage.js       # æœ¬åœ°å­˜å‚¨
    â””â”€â”€ tools.js         # é€šç”¨å·¥å…·
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·
# å®˜ç½‘ä¸‹è½½ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

# å¯¼å…¥é¡¹ç›®
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. é€‰æ‹©"å¯¼å…¥é¡¹ç›®"
3. é€‰æ‹© frontend ç›®å½•
4. å¡«å†™ AppIDï¼ˆæµ‹è¯•å¯ä½¿ç”¨æµ‹è¯•å·ï¼‰
```

### 2. é…ç½®APIåœ°å€
ç¼–è¾‘ `frontend/utils/api.js`ï¼š

```javascript
// å¼€å‘ç¯å¢ƒ
const BASE_URL = 'https://api.example.com';

// ç”Ÿäº§ç¯å¢ƒ
// const BASE_URL = 'https://your-domain.com';
```

### 3. å®‰è£…ä¾èµ–
å¾®ä¿¡å°ç¨‹åºåŸç”Ÿå¼€å‘ï¼Œæ— éœ€é¢å¤–ä¾èµ–ã€‚

## ğŸ—ï¸ é¡µé¢å¼€å‘

### é¦–é¡µï¼ˆindexï¼‰

#### æ–‡ä»¶ç»“æ„
```
pages/index/
â”œâ”€â”€ index.wxml    # é¡µé¢ç»“æ„
â”œâ”€â”€ index.wxss    # é¡µé¢æ ·å¼
â”œâ”€â”€ index.js      # é¡µé¢é€»è¾‘
â””â”€â”€ index.json    # é¡µé¢é…ç½®
```

#### æ ¸å¿ƒåŠŸèƒ½
- å±•ç¤ºä»Šæ—¥å¡ç‰‡
- å¡ç‰‡åˆ‡æ¢
- ç‚¹èµæ”¶è—
- åˆ†äº«åŠŸèƒ½

#### ä»£ç ç¤ºä¾‹
```javascript
// pages/index/index.js
Page({
  data: {
    card: null,
    isLoading: true,
    isLiked: false,
    isFavorited: false
  },

  onLoad() {
    this.loadTodayCard();
  },

  async loadTodayCard() {
    try {
      const res = await wx.request({
        url: `${getApp().globalData.baseUrl}/cards/daily`,
        header: {
          'Authorization': `Bearer ${wx.getStorageSync('token')}`
        }
      });
      
      this.setData({
        card: res.data.data,
        isLoading: false
      });
    } catch (error) {
      console.error('åŠ è½½å¡ç‰‡å¤±è´¥:', error);
    }
  }
});
```

### å¡ç‰‡è¯¦æƒ…é¡µï¼ˆcardï¼‰

#### åŠŸèƒ½ç‰¹ç‚¹
- å…¨å±å±•ç¤º
- æ‰‹åŠ¿æ“ä½œ
- è¯„è®ºäº’åŠ¨
- èƒŒæ™¯åˆ‡æ¢

#### æ‰‹åŠ¿æ”¯æŒ
```javascript
// å·¦å³æ»‘åŠ¨åˆ‡æ¢å¡ç‰‡
onSwiperChange(e) {
  const currentIndex = e.detail.current;
  this.loadCard(currentIndex);
},

// åŒå‡»ç‚¹èµ
onDoubleTap() {
  this.toggleLike();
}
```

### å†å²è®°å½•é¡µï¼ˆhistoryï¼‰

#### åŠŸèƒ½è®¾è®¡
- ç€‘å¸ƒæµå¸ƒå±€
- æœç´¢ç­›é€‰
- æ‰¹é‡æ“ä½œ
- ç¼“å­˜ä¼˜åŒ–

#### æ€§èƒ½ä¼˜åŒ–
```javascript
// è™šæ‹Ÿæ»šåŠ¨
onScrollToLower() {
  if (!this.data.isEnd) {
    this.loadMoreCards();
  }
},

// å›¾ç‰‡æ‡’åŠ è½½
onImageLoad(e) {
  const index = e.currentTarget.dataset.index;
  this.setData({
    [`cards[${index}].loaded`]: true
  });
}
```

## ğŸ¨ æ ·å¼è§„èŒƒ

### è®¾è®¡ç³»ç»Ÿ
```css
/* é¢œè‰²å˜é‡ */
:root {
  --primary-color: #FF8C42;
  --secondary-color: #4ECDC4;
  --background-color: #F5F5F5;
  --text-primary: #333333;
  --text-secondary: #666666;
  --border-color: #E0E0E0;
}

/* é—´è·è§„èŒƒ */
.spacing-xs { margin: 8rpx; }
.spacing-sm { margin: 16rpx; }
.spacing-md { margin: 24rpx; }
.spacing-lg { margin: 32rpx; }

/* å­—ä½“è§„èŒƒ */
.text-xs { font-size: 24rpx; }
.text-sm { font-size: 28rpx; }
.text-md { font-size: 32rpx; }
.text-lg { font-size: 36rpx; }
.text-xl { font-size: 48rpx; }
```

### å“åº”å¼è®¾è®¡
```css
/* é€‚é…ä¸åŒå±å¹• */
@media (min-width: 375rpx) and (max-width: 414rpx) {
  .card-container {
    padding: 20rpx;
  }
}

@media (min-width: 414rpx) {
  .card-container {
    padding: 24rpx;
  }
}
```

## ğŸ”§ ç»„ä»¶å¼€å‘

### å¡ç‰‡ç»„ä»¶ï¼ˆcardï¼‰

#### ç»„ä»¶ç»“æ„
```json
{
  "component": true,
  "usingComponents": {}
}
```

#### å±æ€§å®šä¹‰
```javascript
Component({
  properties: {
    cardData: {
      type: Object,
      value: {}
    },
    showActions: {
      type: Boolean,
      value: true
    }
  },

  methods: {
    onLike() {
      this.triggerEvent('like', { cardId: this.data.cardData.id });
    },
    
    onFavorite() {
      this.triggerEvent('favorite', { cardId: this.data.cardData.id });
    }
  }
});
```

### åŠ è½½ç»„ä»¶ï¼ˆloadingï¼‰

#### åŠ¨ç”»æ•ˆæœ
```css
@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.loading-spinner {
  animation: rotate 1s linear infinite;
}
```

## ğŸ“¡ APIå°è£…

### è¯·æ±‚å°è£…
```javascript
// utils/api.js
class ApiService {
  constructor() {
    this.baseUrl = getApp().globalData.baseUrl;
  }

  async request(options) {
    const token = wx.getStorageSync('token');
    
    return new Promise((resolve, reject) => {
      wx.request({
        url: `${this.baseUrl}${options.url}`,
        method: options.method || 'GET',
        data: options.data || {},
        header: {
          'Content-Type': 'application/json',
          'Authorization': token ? `Bearer ${token}` : '',
          ...options.header
        },
        success: (res) => {
          if (res.statusCode === 200) {
            resolve(res.data);
          } else {
            reject(res.data);
          }
        },
        fail: reject
      });
    });
  }

  // å¡ç‰‡ç›¸å…³API
  async getDailyCard() {
    return this.request({ url: '/cards/daily' });
  }

  async getHistoryCards(page = 1) {
    return this.request({ url: `/cards/history?page=${page}` });
  }

  async toggleFavorite(cardId) {
    return this.request({
      url: `/cards/${cardId}/favorite`,
      method: 'POST'
    });
  }
}

module.exports = new ApiService();
```

## ğŸ—ƒï¸ æ•°æ®ç®¡ç†

### æœ¬åœ°å­˜å‚¨
```javascript
// utils/storage.js
class StorageService {
  setUserInfo(userInfo) {
    wx.setStorageSync('userInfo', userInfo);
  }

  getUserInfo() {
    return wx.getStorageSync('userInfo') || {};
  }

  setSettings(settings) {
    wx.setStorageSync('settings', settings);
  }

  getSettings() {
    return wx.getStorageSync('settings') || {
      theme: 'light',
      fontSize: 'medium',
      notifications: true
    };
  }
}
```

### å…¨å±€çŠ¶æ€ç®¡ç†
```javascript
// app.js
App({
  globalData: {
    userInfo: null,
    settings: {},
    baseUrl: 'https://api.example.com'
  },

  onLaunch() {
    // åˆå§‹åŒ–äº‘å¼€å‘
    if (!wx.cloud) {
      console.error('è¯·ä½¿ç”¨ 2.2.3 æˆ–ä»¥ä¸Šçš„åŸºç¡€åº“ä»¥ä½¿ç”¨äº‘èƒ½åŠ›');
    } else {
      wx.cloud.init({
        env: 'your-cloud-env-id',
        traceUser: true,
      });
    }

    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    this.checkLogin();
  },

  async checkLogin() {
    const token = wx.getStorageSync('token');
    if (token) {
      // éªŒè¯tokenæœ‰æ•ˆæ€§
      try {
        await this.globalData.api.verifyToken();
      } catch (error) {
        this.login();
      }
    } else {
      this.login();
    }
  },

  async login() {
    wx.login({
      success: async (res) => {
        if (res.code) {
          try {
            const result = await this.globalData.api.login(res.code);
            wx.setStorageSync('token', result.token);
            this.globalData.userInfo = result.userInfo;
          } catch (error) {
            console.error('ç™»å½•å¤±è´¥:', error);
          }
        }
      }
    });
  }
});
```

## ğŸ­ ä¸»é¢˜åˆ‡æ¢

### ä¸»é¢˜é…ç½®
```javascript
// utils/theme.js
const themes = {
  light: {
    '--bg-color': '#FFFFFF',
    '--text-color': '#333333',
    '--card-bg': '#F5F5F5',
    '--border-color': '#E0E0E0'
  },
  dark: {
    '--bg-color': '#1A1A1A',
    '--text-color': '#FFFFFF',
    '--card-bg': '#2C2C2C',
    '--border-color': '#404040'
  },
  auto: {
    // è·Ÿéšç³»ç»Ÿ
  }
};

function applyTheme(theme) {
  const themeConfig = themes[theme] || themes.light;
  Object.keys(themeConfig).forEach(key => {
    wx.setStorageSync(key, themeConfig[key]);
  });
}
```

## ğŸ“± é€‚é…ä¼˜åŒ–

### åˆ˜æµ·å±é€‚é…
```css
.safe-area {
  padding-top: constant(safe-area-inset-top);
  padding-top: env(safe-area-inset-top);
}
```

### å­—ä½“å¤§å°é€‚é…
```javascript
// ç›‘å¬ç³»ç»Ÿå­—ä½“å¤§å°å˜åŒ–
wx.onThemeChange((result) => {
  this.setData({
    theme: result.theme
  });
});
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### å›¾ç‰‡ä¼˜åŒ–
```javascript
// ä½¿ç”¨webpæ ¼å¼
const imageUrl = originalUrl.replace('.jpg', '.webp');

// å‹ç¼©å›¾ç‰‡
wx.compressImage({
  src: imageUrl,
  quality: 80,
  success: (res) => {
    console.log('å‹ç¼©æˆåŠŸ', res.tempFilePath);
  }
});
```

### åˆ†åŒ…åŠ è½½
```json
// app.json
{
  "subPackages": [
    {
      "root": "pages/settings",
      "pages": ["index", "theme", "font"]
    }
  ]
}
```

## ğŸ§ª è°ƒè¯•å·¥å…·

### å¼€å‘è°ƒè¯•
```javascript
// å¼€å¯è°ƒè¯•æ¨¡å¼
wx.setEnableDebug({
  enableDebug: true
});

// æ€§èƒ½ç›‘æ§
const performance = wx.getPerformance();
const observer = performance.createObserver((entryList) => {
  const entries = entryList.getEntries();
  // åˆ†ææ€§èƒ½æ•°æ®
});
observer.observe({ entryTypes: ['render', 'navigation'] });
```

## ğŸ“‹ å‘å¸ƒæ£€æŸ¥æ¸…å•

### åŠŸèƒ½æ£€æŸ¥
- [ ] æ‰€æœ‰é¡µé¢åŠŸèƒ½æ­£å¸¸
- [ ] APIæ¥å£è°ƒç”¨æ— è¯¯
- [ ] ç”¨æˆ·ç™»å½•æµç¨‹å®Œæ•´
- [ ] åˆ†äº«åŠŸèƒ½æ­£å¸¸

### æ€§èƒ½æ£€æŸ¥
- [ ] é¦–å±åŠ è½½æ—¶é—´ < 3ç§’
- [ ] å›¾ç‰‡èµ„æºå·²ä¼˜åŒ–
- [ ] åˆ†åŒ…åŠ è½½é…ç½®æ­£ç¡®
- [ ] æ— å†…å­˜æ³„æ¼

### ä½“éªŒæ£€æŸ¥
- [ ] é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- [ ] å¤œé—´æ¨¡å¼æ­£å¸¸åˆ‡æ¢
- [ ] æ‰‹åŠ¿æ“ä½œå“åº”çµæ•
- [ ] é”™è¯¯æç¤ºå‹å¥½

### åˆè§„æ£€æŸ¥
- [ ] ç”¨æˆ·éšç§åè®®
- [ ] å†…å®¹å®‰å…¨å®¡æ ¸
- [ ] å°ç¨‹åºç±»ç›®æ­£ç¡®
- [ ] ç‰ˆæœ¬å·æ›´æ–°

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [UIåŸå‹å›¾æ–‡æ¡£](../docs/UIåŸå‹å›¾æ–‡æ¡£.md)
- [APIæ–‡æ¡£](../docs/APIæ–‡æ¡£.md)
- [éƒ¨ç½²æŒ‡å—](../docs/éƒ¨ç½²æŒ‡å—.md)