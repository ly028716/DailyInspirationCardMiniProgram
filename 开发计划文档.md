# AI每日灵感卡片小程序开发计划文档

## 项目概述
**项目名称**: AI每日灵感卡片
**项目类型**: 微信小程序 + Python后端服务
**核心功能**: 每日自动生成励志/诗歌/哲理卡片，为用户提供精神激励和美学享受

## 技术架构

### 前端技术栈
- **平台**: 微信小程序
- **框架**: 微信小程序原生框架
- **UI组件库**: Vant Weapp
- **状态管理**: 小程序原生storage

### 后端技术栈
- **语言**: Python 3.9+
- **框架**: FastAPI (高性能异步框架)
- **数据库**: SQLite (开发) / PostgreSQL (生产)
- **AI模型**: 通义千问大模型API
- **部署**: Docker容器化部署

## 项目结构

```
ai-daily-inspiration-cards/
├── frontend/                 # 微信小程序前端
│   ├── pages/
│   │   ├── index/           # 首页
│   │   ├── card/            # 卡片详情页
│   │   ├── profile/         # 个人中心
│   │   └── settings/        # 设置页面
│   ├── components/          # 自定义组件
│   ├── utils/              # 工具函数
│   ├── assets/             # 静态资源
│   └── app.js              # 小程序入口
├── backend/                 # Python后端服务
│   ├── app.py              # FastAPI主应用
│   ├── models/             # 数据模型
│   ├── routers/            # API路由
│   ├── services/           # 业务逻辑
│   ├── utils/              # 工具模块
│   ├── requirements.txt    # Python依赖
│   └── Dockerfile         # Docker配置
└── docs/                   # 项目文档
    ├── 开发计划文档.md
    ├── API文档.md
    └── 部署指南.md
```

## 功能模块详细设计

### 1. 用户管理模块
**功能描述**: 管理用户注册、登录、偏好设置

#### 小程序端功能
- 微信授权登录
- 用户偏好设置（卡片类型偏好：励志/诗歌/哲理）
- 收藏管理
- 浏览历史

#### 服务端API
- `POST /api/users/login` - 用户登录
- `GET /api/users/profile` - 获取用户信息
- `PUT /api/users/preferences` - 更新用户偏好
- `GET /api/users/favorites` - 获取收藏列表

### 2. 内容生成模块
**功能描述**: 每日自动生成高质量灵感卡片内容

#### 生成策略
- **时间触发**: 每日早8点自动生成
- **内容类型**: 励志语录、现代诗歌、哲理短文
- **个性化**: 基于用户偏好和历史行为
- **多样性**: 避免重复，确保内容新鲜度

#### AI提示词设计
```
系统角色: 你是一位富有洞察力的生活哲学家和诗人
任务: 为用户生成每日灵感卡片内容
要求:
1. 内容长度: 50-100字
2. 风格: {根据用户偏好调整}
3. 主题: {每日主题轮换}
4. 情感: 积极向上，富有启发性
5. 语言: 简洁优美，易于理解
```

#### 服务端API
- `POST /api/cards/generate` - 生成卡片内容
- `GET /api/cards/daily` - 获取今日卡片
- `GET /api/cards/history` - 获取历史卡片
- `POST /api/cards/{id}/favorite` - 收藏卡片

### 3. 卡片展示模块
**功能描述**: 美观的卡片展示和交互

#### 展示样式
- **卡片模板**: 3套精美模板（极简/文艺/活力）
- **背景图**: 高质量渐变背景或精选图片
- **字体**: 优雅的中文字体搭配
- **动效**: 优雅的加载和切换动画

#### 交互功能
- 左右滑动切换今日卡片
- 长按保存卡片到相册
- 一键分享到朋友圈
- 收藏和点赞

## 开发阶段规划

### 第一阶段：基础架构搭建 (3天)
**时间**: 第1-3天
**目标**: 建立项目基础框架

#### 小程序端任务
- [ ] 创建小程序项目结构
- [ ] 配置app.json和基础设置
- [ ] 搭建页面路由框架
- [ ] 集成UI组件库(Vant Weapp)

#### 服务端任务
- [ ] 初始化Python FastAPI项目
- [ ] 设计数据库模型
- [ ] 配置通义千问API集成
- [ ] 搭建基础API框架

### 第二阶段：核心功能开发 (5天)
**时间**: 第4-8天
**目标**: 实现用户管理和卡片生成功能

#### 小程序端任务
- [ ] 实现微信登录功能
- [ ] 创建卡片展示页面
- [ ] 实现用户偏好设置
- [ ] 开发收藏和历史功能

#### 服务端任务
- [ ] 完成用户管理API
- [ ] 实现AI内容生成服务
- [ ] 开发卡片管理API
- [ ] 设置定时任务(每日8点生成)

### 第三阶段：UI/UX优化 (3天)
**时间**: 第9-11天
**目标**: 提升用户体验和视觉效果

#### 任务清单
- [ ] 设计3套卡片模板
- [ ] 优化页面加载动画
- [ ] 添加交互反馈
- [ ] 适配不同屏幕尺寸

### 第四阶段：测试与部署 (2天)
**时间**: 第12-13天
**目标**: 完成测试和上线准备

#### 测试任务
- [ ] 功能测试(登录、生成、收藏)
- [ ] 性能测试(加载速度、并发)
- [ ] 兼容性测试(不同手机型号)
- [ ] 用户体验测试

#### 部署任务
- [ ] 服务端Docker化部署
- [ ] 小程序代码上传审核
- [ ] 配置生产环境
- [ ] 准备上线文档

## 技术实现细节

### 数据库设计

#### 用户表(users)
```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    openid VARCHAR(100) UNIQUE NOT NULL,
    nickname VARCHAR(50),
    avatar_url VARCHAR(255),
    preference_type VARCHAR(20) DEFAULT 'all',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 卡片表(cards)
```sql
CREATE TABLE cards (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    content TEXT NOT NULL,
    type VARCHAR(20) NOT NULL,
    background_style VARCHAR(50),
    generate_date DATE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 收藏表(favorites)
```sql
CREATE TABLE favorites (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    card_id INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (card_id) REFERENCES cards(id)
);
```

### AI内容生成策略

#### 内容类型权重
- 励志语录: 40%
- 现代诗歌: 35%
- 哲理短文: 25%

#### 个性化算法
1. 分析用户收藏历史
2. 识别用户偏好模式
3. 动态调整生成权重
4. 确保内容多样性

### 性能优化方案

#### 前端优化
- 图片懒加载
- 数据缓存策略
- 分包加载
- 骨架屏优化

#### 后端优化
- Redis缓存热门数据
- 数据库查询优化
- API响应压缩
- 异步任务队列

## 风险评估与应对

### 技术风险
- **AI API限制**: 准备备用生成方案
- **微信审核**: 提前了解审核规范
- **性能瓶颈**: 预留扩展方案

### 运营风险
- **内容质量**: 建立内容审核机制
- **用户增长**: 制定推广策略
- **成本控制**: 监控API调用费用

## 后续迭代计划

### 功能扩展
- 卡片DIY功能
- 用户投稿系统
- 社交分享功能
- 积分奖励机制

### 技术升级
- 多端同步(支持Web端)
- 推送通知
- 离线模式
- 数据分析仪表板

## 开发资源需求

### 人力资源
- 小程序开发工程师: 1人
- Python后端工程师: 1人
- UI/UX设计师: 0.5人(兼职)

### 技术资源
- 微信小程序开发者账号
- 通义千问API密钥
- 服务器资源(2核4G起步)
- CDN加速服务

### 时间资源
- 总开发周期: 13个工作日
- 测试周期: 2个工作日
- 审核周期: 1-7个工作日(微信官方)

---

**文档版本**: v1.0
**制定日期**: 2024年
**负责人**: 开发团队
**审核状态**: 待评审